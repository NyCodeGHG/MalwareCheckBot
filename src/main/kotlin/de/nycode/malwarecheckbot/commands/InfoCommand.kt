package de.nycode.malwarecheckbot.commands

import de.nycode.malwarecheckbot.command.AbstractSlashCommand
import de.nycode.malwarecheckbot.utils.Colors
import de.nycode.malwarecheckbot.utils.Emotes
import dev.kord.core.behavior.interaction.respondEphemeral
import dev.kord.core.event.interaction.InteractionCreateEvent
import dev.kord.rest.builder.interaction.embed
import kotlinx.datetime.Clock
import kotlinx.datetime.TimeZone
import kotlinx.datetime.toLocalDateTime

object InfoCommand : AbstractSlashCommand() {
    override val name: String = "info"
    override val description: String = "Shows information about the bot."
    override suspend fun InteractionCreateEvent.onInvocation() {
        interaction.respondEphemeral {
            embed {
                color = Colors.BLUE
                title = "${Emotes.INFO} Malware Check Bot"
                description =
                    "Malware Check Bot is a Discord Bot which protects your Members from Malware und Unwanted Software using the [Google Safebrowsing API](https://developers.google.com/safe-browsing/)."
                field("Author", true) { "[NyCode#0001](https://github.com/NyCodeGHG)" }
                field("Support Discord", true) { "[discord.gg/NkFvCENEKN](https://discord.gg/NkFvCENEKN)" }
                field("GitHub", true) { "[Click](https://github.com/NyCodeGHG/MalwareCheckBot)" }
                field(
                    "Invite",
                    true
                ) { "[Click](https://discord.com/api/oauth2/authorize?client_id=854771060191789076&permissions=11264&scope=bot%20applications.commands)" }
                footer {
                    text = "(C) ${Clock.System.now().toLocalDateTime(TimeZone.UTC).year} NyCode"
                    icon =
                        "https://cdn.discordapp.com/attachments/853726173666213898/854776063967232058/MalwareCheckBot.png"
                }
            }
        }
    }
}
