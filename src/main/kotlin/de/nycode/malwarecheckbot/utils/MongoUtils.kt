package de.nycode.malwarecheckbot.utils

import com.mongodb.ConnectionString
import com.mongodb.MongoClientSettings
import org.bson.UuidRepresentation
import org.litote.kmongo.coroutine.coroutine
import org.litote.kmongo.reactivestreams.KMongo

/**
 * Create a new [com.mongodb.reactivestreams.client.MongoClient] with Standard uuid representation.
 */
fun createMongoClient(connectionString: ConnectionString) = KMongo.createClient(
    MongoClientSettings
        .builder()
        .uuidRepresentation(UuidRepresentation.STANDARD)
        .applyConnectionString(connectionString)
        .build()
).coroutine
